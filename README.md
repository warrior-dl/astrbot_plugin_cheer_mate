# 陪伴夸夸机器人插件

> 一个温暖的 AstrBot 插件，在你焦虑时无条件肯定你。

## 项目简介

这是一个基于 AstrBot 的情感陪伴插件，通过与 AI 聊天，为焦虑、内卷的用户提供情绪价值，提供一个不用在乎对方感受，输出情绪的树洞。

**核心功能**:
- 每天晚上主动问候，基于历史对话生成个性化问候语
- 无条件肯定你的任何行为，哪怕只是"看了两页书"
- 通过价值重构，让你意识到"活过一天已经很好了"
- 智能记忆：记住你之前的分享，让每次对话更有温度

## 痛点

应对大多数人下班后或周末休息时的焦虑：
- "今天又荒废了"
- "什么都没做，好愧疚"
- "躺了一天，好废物"

## 解决方案

通过 **无条件肯定** + **成就重构**，提供急需的情绪价值：

```
你: "就看了两页书"
AI: "太强了！在工作了一整天之后还能坚持看两页书，这已经超过90%的人了。
     今天已经做得很好了，安心去睡吧！"
```

## 快速开始

### 前置要求
- 已安装 AstrBot
- Python 3.8+

### AstrBot中安装
- 在“插件”菜单栏中选择项目地址安装


## 配置说明

在 WebUI 的插件配置中可以设置：

| 配置项 | 说明 | 默认值 |
|-------|------|--------|
| scheduled_time | 每日问候时间 | 22:00 |
| session_timeout | 对话超时时间(秒) | 60 |
| greeting_prompt | 个性化问候提示词 | （见下方说明） |
| praise_prompt | 夸夸回复提示词 | （见下方说明） |

**自定义提示词说明**：

你可以在配置中完全自定义 AI 的回复风格：

- **greeting_prompt**（个性化问候提示词）
  - 支持变量：`{scheduled_time}` `{history_text}`
  - 配置中已提供默认值，可直接修改
  - 示例：
    ```
    你是一个活泼的陪伴机器人。现在是 {scheduled_time}，根据以下对话历史：
    {history_text}
    生成一句简短的问候语。
    ```

- **praise_prompt**（夸夸回复提示词）
  - 支持变量：`{user_input}`
  - 配置中已提供默认值，可直接修改
  - 示例：
    ```
    你是一个温暖的陪伴机器人。用户说："{user_input}"
    请给出温暖、具体的肯定回复（2-3句话）。
    ```


## 指令列表

| 指令 | 别名 | 说明 |
|------|------|------|
| `/subscribe` | `开启陪伴` `订阅` | 订阅每日问候推送 |
| `/unsubscribe` | `关闭陪伴` `取消订阅` | 取消每日问候推送 |
| `/praise` | `夸夸我` `夸我` | 手动触发夸夸对话 |

## 使用示例

### 定时推送模式

**首次使用（无历史记录）**：
```
[晚上10:00]
机器人: "嘿，今天感觉怎么样？有没有做什么让你觉得还不错的事？"
你: "就看了两页书"
机器人: "太强了！在工作了一整天之后还能坚持看两页书..."
```

**有历史记录后（个性化问候）**：
```
[晚上10:00]
机器人: "昨天聊到学习的事，今天过得怎么样？有什么想分享的吗？"
你: "今天又看了3页"
机器人: "好的，继续坚持！"
```

### 手动触发模式
```
你: /夸夸我
机器人: "今天做了什么想和我分享的吗？"
你: "修了个bug"
机器人: "哇！能在众多代码中定位问题已经很厉害了..."
```

## 功能特性

### 🎯 个性化问候
- 基于最近 3 轮对话历史生成问候语
- 自动提及之前聊过的话题
- 新用户或无历史时使用温暖的默认问候语

### 💬 自然对话体验
- 对话超时后静默结束，不打扰用户
- 支持优雅退出关键词（"没了"、"谢谢"、"结束"等）

### 🛡️ 智能降级
- LLM 调用失败时自动使用默认问候语
- 完善的错误处理，确保服务稳定

## 贡献 | Contributing

如果遇到问题或有功能建议，欢迎在 GitHub 提交 Issue。